# Phonetisaurus FAQ #

This page is dedicated to frequently asked questions about the Phonetisaurus toolkit.  It is new but growing.

  * **Q**: **XX** doesn't work!
  * **A**: Please provide a detailed explanation along with any relevant output, and your systems specs.  You can use the [issue tracker](http://code.google.com/p/phonetisaurus/issues/list) or write to me directly.

  * **Q**: The README.md doesn't match the commandline!
  * **A**: Make sure you are using the latest version of the distribution: [phonetisaurus-0.4.tgz](http://phonetisaurus.googlecode.com/files/phonetisaurus-0.4.tgz).  Things have changed enormously since the 0.2 version.

  * **Q**: When I specify N-best the output contains less than N hypotheses!
```
$ phonetisaurus-g2p --model=g014b2b.fst --input=ABBREVIATE --words --nbest=3 
ABBREVIATE	12.7418	AH B R IY V IY EY T
```

  * **A**: There are two possibilities here.  One is that the input actually only has 1 or x < N possible hypotheses given the model.  The second possibility is that there are multiple paths through the model which produce the same final output after epsilon and '`_`' (skip) tokens are removed.  This means that the first N pronunciations could be identical and just have different scores associated with them.  The final step in the decoding process will filter these, but we do not determinize the intermediate result for efficiency reasons.  In the latter instance you can increase the search beam to get a larger set of N-best hypotheses,
```
$ phonetisaurus-g2p --model=g014b2b.fst --input=ABBREVIATE --words --nbest=3 --beam=2000
ABBREVIATE	12.7418	AH B R IY V IY EY T
ABBREVIATE	20.818	AH B R IY V IY EY T IY
ABBREVIATE	21.5227	AA B R IY V IY EY T
```

  * **Q**: phonetisaurus-g2p is complaining about some inputs
```
$ phonetisaurus-g2p --model=g014b2b.fst --input=TESt --words 
Symbol: 't' not found in input symbols table.
Mapping to null...
TESt	12.0213	T IY Z
```
  * **A**: This happens if one or more of the input tokens (letters) in the input test word was not in the training data for the G2P model.  In the above example the input model, `g014b2b.fst` was trained using exclusively uppercase entries.  The input word 'TESt' contains a lowercase 't'.  The program automatically maps this to a null transition, throws a warning, and outputs a hypothesis corresponding to the truncated input word, 'TES'.

  * **Q**: I'm trying to generate N-best lists to use for acoustic model training for a speech recognition system...
  * **A**: The [Lattice Minimum Bayes-Risk](http://phonetisaurus.googlecode.com/files/phonetisaurus-lmbr-g2p.pdf) decoder is a bit slower, but will typically output better N-best lists.  It aggregates N-gram subsequences in a raw hypothesis lattice to build a consensus-based re-ordered list of hypotheses.  In future you will be able to further 'pinch' or filter these lattices using language-specific phonotactic constraint templates which should further improve the quality of the N-best lists generated by both the Viterbi and the LMBR decoders.
```
$ phonetisaurus-g2p --model=g014b2b.fst --input=ABBREVIATE --words --nbest=3 --beam=2000
ABBREVIATE	12.7418	AH B R IY V IY EY T
ABBREVIATE	20.818	AH B R IY V IY EY T IY
ABBREVIATE	21.5227	AA B R IY V IY EY T

$ phonetisaurus-g2p --model=g014b2b.fst --input=ABBREVIATE --words --nbest=3 --beam=5000 --mbr --order=10
ABBREVIATE	-0.7345	AH B R IY V IY EY T
ABBREVIATE	7.10767	AA B R IY V IY EY T
ABBREVIATE	7.48961	AE B R IY V IY EY T
```
  * **Q**: There are lots of optional parameters... what do they do?
  * **A**: For many dictionaries the default parameters should produce very high quality pronunciations.  In some cases you will be able to improve the results by fiddling with the parameters.  The training and decoding phases are very fast so there is little penalty in just experimenting.

  * **Q**: The symbols and output pronunciations look REALLY screwy!
  * **A**: Phonetisaurus uses several special input symbols, including '`_`', '`|`', and '`}`'.  If your input dictionary uses these tokens as part of the normal input or output alphabet, this may cause something to go awry.  In previous versions the toolkit autmatically detected this, but at present the user is saddled with the responsibility.  The binary tools, `phonetisaurus-g2p`, `phonetisaurus-align` and `phonetisaurus-arpa2fst` provide command line flags to manually set these special tokens.  Please see the `help` messages associated with these for further information.

  * **Q**: But you didn't answer _my_ question!
  * **A**: Feel free to write to me directly!